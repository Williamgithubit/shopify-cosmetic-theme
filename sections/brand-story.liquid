{% liquid
  assign heading = section.settings.heading
  assign text = section.settings.text
  assign image = section.settings.image
  assign layout = section.settings.layout
  assign background_color = section.settings.background_color
%}

<div class="brand-story section-spacing" style="background-color: {{ background_color }};">
  <div class="page-width">
    <div class="brand-story__grid brand-story__grid--{{ layout }}">
      {%- if image != blank -%}
        <div class="brand-story__media">
          <img
            srcset="
              {%- if image.width >= 375 -%}{{ image | image_url: width: 375 }} 375w,{%- endif -%}
              {%- if image.width >= 550 -%}{{ image | image_url: width: 550 }} 550w,{%- endif -%}
              {%- if image.width >= 750 -%}{{ image | image_url: width: 750 }} 750w,{%- endif -%}
              {%- if image.width >= 1100 -%}{{ image | image_url: width: 1100 }} 1100w,{%- endif -%}
              {%- if image.width >= 1500 -%}{{ image | image_url: width: 1500 }} 1500w,{%- endif -%}
              {{ image | image_url }} {{ image.width }}w
            "
            src="{{ image | image_url: width: 750 }}"
            alt="{{ image.alt | escape }}"
            loading="lazy"
            width="{{ image.width }}"
            height="{{ image.height }}"
            class="brand-story__image">
        </div>
      {%- endif -%}

      <div class="brand-story__content">
        {%- if heading != blank -%}
          <h2 class="brand-story__heading h2">{{ heading | escape }}</h2>
        {%- endif -%}

        {%- if text != blank -%}
          <div class="brand-story__text rte">
            {{ text }}
          </div>
        {%- endif -%}

        {%- if section.blocks.size > 0 -%}
          <div class="brand-story__values">
            {%- for block in section.blocks -%}
              <div class="brand-story__value" {{ block.shopify_attributes }}>
                {%- if block.settings.icon != 'none' -%}
                  <div class="brand-story__value-icon">
                    {%- case block.settings.icon -%}
                      {%- when 'leaf' -%}
                        <svg
                          width="24"
                          height="24"
                          viewBox="0 0 24 24"
                          fill="none"
                          stroke="currentColor"
                          stroke-width="2"
                          stroke-linecap="round"
                          stroke-linejoin="round">
                          <path d="M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z" />
                          <path d="M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12" />
                        </svg>
                      {%- when 'heart' -%}
                        <svg
                          width="24"
                          height="24"
                          viewBox="0 0 24 24"
                          fill="none"
                          stroke="currentColor"
                          stroke-width="2"
                          stroke-linecap="round"
                          stroke-linejoin="round">
                          <path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z" />
                        </svg>
                      {%- when 'star' -%}
                        <svg
                          width="24"
                          height="24"
                          viewBox="0 0 24 24"
                          fill="none"
                          stroke="currentColor"
                          stroke-width="2"
                          stroke-linecap="round"
                          stroke-linejoin="round">
                          <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2" />
                        </svg>
                      {%- when 'shield' -%}
                        <svg
                          width="24"
                          height="24"
                          viewBox="0 0 24 24"
                          fill="none"
                          stroke="currentColor"
                          stroke-width="2"
                          stroke-linecap="round"
                          stroke-linejoin="round">
                          <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" />
                        </svg>
                      {%- when 'award' -%}
                        <svg
                          width="24"
                          height="24"
                          viewBox="0 0 24 24"
                          fill="none"
                          stroke="currentColor"
                          stroke-width="2"
                          stroke-linecap="round"
                          stroke-linejoin="round">
                          <circle
                            cx="12"
                            cy="8"
                            r="6" />
                          <path d="M15.477 12.89 17 22l-5-3-5 3 1.523-9.11" />
                        </svg>
                      {%- when 'droplet' -%}
                        <svg
                          width="24"
                          height="24"
                          viewBox="0 0 24 24"
                          fill="none"
                          stroke="currentColor"
                          stroke-width="2"
                          stroke-linecap="round"
                          stroke-linejoin="round">
                          <path d="M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z" />
                        </svg>
                    {%- endcase -%}
                  </div>
                {%- endif -%}
                <div class="brand-story__value-content">
                  {%- if block.settings.title != blank -%}
                    <h3 class="brand-story__value-title">{{ block.settings.title | escape }}</h3>
                  {%- endif -%}
                  {%- if block.settings.description != blank -%}
                    <p class="brand-story__value-description">{{ block.settings.description | escape }}</p>
                  {%- endif -%}
                </div>
              </div>
            {%- endfor -%}
          </div>
        {%- endif -%}
      </div>
    </div>
  </div>
</div>

<style>
  .brand-story {
    position: relative;
    overflow: hidden;
  }

  .brand-story__grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: var(--spacing-3xl, 64px);
    align-items: center;
  }

  .brand-story__grid--image-right {
    direction: rtl;
  }

  .brand-story__grid--image-right > * {
    direction: ltr;
  }

  .brand-story__media {
    position: relative;
    border-radius: var(--radius-lg, 12px);
    overflow: hidden;
  }

  .brand-story__image {
    width: 100%;
    height: auto;
    display: block;
    border-radius: var(--radius-lg, 12px);
  }

  .brand-story__heading {
    margin-bottom: var(--spacing-lg, 24px);
    font-size: clamp(2.4rem, 4vw, 4rem);
    line-height: 1.2;
  }

  .brand-story__text {
    margin-bottom: var(--spacing-2xl, 48px);
    font-size: 1.6rem;
    line-height: 1.8;
    color: #666;
  }

  .brand-story__values {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: var(--spacing-xl, 32px);
  }

  .brand-story__value {
    display: flex;
    gap: var(--spacing-md, 16px);
    align-items: flex-start;
  }

  .brand-story__value-icon {
    flex-shrink: 0;
    width: 48px;
    height: 48px;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: rgba(212, 165, 116, 0.1);
    color: var(--color-primary, #d4a574);
    border-radius: var(--radius-md, 8px);
  }

  .brand-story__value-content {
    flex: 1;
  }

  .brand-story__value-title {
    font-size: 1.6rem;
    font-weight: 600;
    margin: 0 0 var(--spacing-xs, 4px);
    color: var(--color-text, #2c2c2c);
  }

  .brand-story__value-description {
    font-size: 1.4rem;
    line-height: 1.6;
    color: #666;
    margin: 0;
  }

  @media screen and (max-width: 989px) {
    .brand-story__grid {
      grid-template-columns: 1fr;
      gap: var(--spacing-2xl, 48px);
    }

    .brand-story__grid--image-right {
      direction: ltr;
    }

    .brand-story__values {
      grid-template-columns: 1fr;
    }
  }
</style>

{% schema %}
  {
    "name": "Brand Story",
    "tag": "section",
    "class": "section-brand-story",
    "settings": [
      {
        "type": "text",
        "id": "heading",
        "label": "Heading",
        "default": "Our Story"
      },
      {
        "type": "richtext",
        "id": "text",
        "label": "Text",
        "default": "<p>We believe in creating products that are as kind to your skin as they are to the planet. Every formula is crafted with care, using only the finest natural ingredients.</p>"
      },
      {
        "type": "image_picker",
        "id": "image",
        "label": "Image"
      },
      {
        "type": "select",
        "id": "layout",
        "label": "Image position",
        "options": [
          {
            "value": "image-left",
            "label": "Left"
          }, {
            "value": "image-right",
            "label": "Right"
          }
        ],
        "default": "image-left"
      }, {
        "type": "color",
        "id": "background_color",
        "label": "Background color",
        "default": "#ffffff"
      }
    ],
    "blocks": [
      {
        "type": "value",
        "name": "Value",
        "settings": [
          {
            "type": "select",
            "id": "icon",
            "label": "Icon",
            "options": [
              {
                "value": "none",
                "label": "None"
              },
              {
                "value": "leaf",
                "label": "Leaf (Natural)"
              },
              {
                "value": "heart",
                "label": "Heart (Care)"
              },
              {
                "value": "star",
                "label": "Star (Quality)"
              }, {
                "value": "shield",
                "label": "Shield (Safe)"
              }, {
                "value": "award",
                "label": "Award (Certified)"
              }, {
                "value": "droplet",
                "label": "Droplet (Pure)"
              }
            ],
            "default": "leaf"
          }, {
            "type": "text",
            "id": "title",
            "label": "Title",
            "default": "100% Natural"
          }, {
            "type": "textarea",
            "id": "description",
            "label": "Description",
            "default": "Only the finest natural ingredients"
          }
        ]
      }
    ],
    "presets": [
      {
        "name": "Brand Story",
        "blocks": [
          {
            "type": "value",
            "settings": {
              "icon": "leaf",
              "title": "100% Natural",
              "description": "Only the finest natural ingredients"
            }
          }, {
            "type": "value",
            "settings": {
              "icon": "heart",
              "title": "Cruelty Free",
              "description": "Never tested on animals"
            }
          }, {
            "type": "value",
            "settings": {
              "icon": "droplet",
              "title": "Pure & Clean",
              "description": "No harmful chemicals"
            }
          }
        ]
      }
    ]
  }
{% endschema %}