{% liquid
  assign heading = section.settings.heading
  assign subheading = section.settings.subheading
  assign incentive = section.settings.incentive
  assign button_text = section.settings.button_text
  assign background_image = section.settings.background_image
  assign overlay_opacity = section.settings.overlay_opacity
%}

<div class="newsletter-premium section-spacing">
  {%- if background_image != blank -%}
    <div class="newsletter-premium__background">
      <img
        srcset="
          {%- if background_image.width >= 750 -%}{{ background_image | image_url: width: 750 }} 750w,{%- endif -%}
          {%- if background_image.width >= 1100 -%}{{ background_image | image_url: width: 1100 }} 1100w,{%- endif -%}
          {%- if background_image.width >= 1500 -%}{{ background_image | image_url: width: 1500 }} 1500w,{%- endif -%}
          {{ background_image | image_url }} {{ background_image.width }}w
        "
        sizes="100vw"
        src="{{ background_image | image_url: width: 1500 }}"
        alt="{{ background_image.alt | escape }}"
        loading="lazy">
      <div class="newsletter-premium__overlay" style="opacity: {{ overlay_opacity | divided_by: 100.0 }};"></div>
    </div>
  {%- endif -%}

  <div class="page-width">
    <div class="newsletter-premium__container">
      <div class="newsletter-premium__content">
        {%- if incentive != blank -%}
          <div class="newsletter-premium__incentive">
            <svg
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2">
              <polyline points="20 12 20 22 4 22 4 12" />
              <rect
                x="2"
                y="7"
                width="20"
                height="5" />
              <line
                x1="12"
                y1="22"
                x2="12"
                y2="7" />
            </svg>
            {{ incentive | escape }}
          </div>
        {%- endif -%}

        {%- if heading != blank -%}
          <h2 class="newsletter-premium__heading">{{ heading | escape }}</h2>
        {%- endif -%}

        {%- if subheading != blank -%}
          <p class="newsletter-premium__subheading">{{ subheading | escape }}</p>
        {%- endif -%}

        <div class="newsletter-premium__form-wrapper">
          {% form 'customer'
            , class: 'newsletter-premium__form' %}
            <input
              type="hidden"
              name="contact[tags]"
              value="newsletter">

            <div class="newsletter-premium__input-group">
              <label for="newsletter-email-{{ section.id }}" class="visually-hidden">Email address</label>
              <input
                id="newsletter-email-{{ section.id }}"
                type="email"
                name="contact[email]"
                class="newsletter-premium__input"
                placeholder="Enter your email address"
                aria-required="true"
                required
                autocomplete="email">
              <button
                type="submit"
                class="newsletter-premium__button"
                name="commit">
                {{ button_text | escape }}
                <svg
                  width="20"
                  height="20"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2">
                  <line
                    x1="5"
                    y1="12"
                    x2="19"
                    y2="12" />
                  <polyline points="12 5 19 12 12 19" />
                </svg>
              </button>
            </div>

            {%- if form.posted_successfully? -%}
              <div class="newsletter-premium__success" role="status">
                <svg
                  width="20"
                  height="20"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2">
                  <polyline points="20 6 9 17 4 12" />
                </svg>
                {{ 'sections.newsletter.success' | t }}
              </div>
            {%- endif -%}

            {%- if form.errors -%}
              <div class="newsletter-premium__error" role="alert">
                {{ form.errors | default_errors }}
              </div>
            {%- endif -%}
          {% endform %}

          <p class="newsletter-premium__privacy">
            <svg
              width="14"
              height="14"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2">
              <rect
                x="3"
                y="11"
                width="18"
                height="11"
                rx="2"
                ry="2" />
              <path d="M7 11V7a5 5 0 0 1 10 0v4" />
            </svg>
            We respect your privacy. Unsubscribe anytime.
          </p>
        </div>

        {%- if section.blocks.size > 0 -%}
          <div class="newsletter-premium__benefits">
            {%- for block in section.blocks -%}
              <div class="newsletter-premium__benefit" {{ block.shopify_attributes }}>
                {%- if block.settings.icon != 'none' -%}
                  <div class="newsletter-premium__benefit-icon">
                    {%- case block.settings.icon -%}
                      {%- when 'gift' -%}
                        <svg
                          width="20"
                          height="20"
                          viewBox="0 0 24 24"
                          fill="none"
                          stroke="currentColor"
                          stroke-width="2">
                          <polyline points="20 12 20 22 4 22 4 12" />
                          <rect
                            x="2"
                            y="7"
                            width="20"
                            height="5" />
                        </svg>
                      {%- when 'star' -%}
                        <svg
                          width="20"
                          height="20"
                          viewBox="0 0 24 24"
                          fill="none"
                          stroke="currentColor"
                          stroke-width="2">
                          <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2" />
                        </svg>
                      {%- when 'bell' -%}
                        <svg
                          width="20"
                          height="20"
                          viewBox="0 0 24 24"
                          fill="none"
                          stroke="currentColor"
                          stroke-width="2">
                          <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9" />
                        </svg>
                      {%- when 'tag' -%}
                        <svg
                          width="20"
                          height="20"
                          viewBox="0 0 24 24"
                          fill="none"
                          stroke="currentColor"
                          stroke-width="2">
                          <path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z" />
                        </svg>
                    {%- endcase -%}
                  </div>
                {%- endif -%}
                <span>{{ block.settings.text | escape }}</span>
              </div>
            {%- endfor -%}
          </div>
        {%- endif -%}
      </div>
    </div>
  </div>
</div>

<style>
  .newsletter-premium {
    position: relative;
    overflow: hidden;
  }

  .newsletter-premium__background {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 0;
  }

  .newsletter-premium__background img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .newsletter-premium__overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, rgba(212, 165, 116, 0.9) 0%, rgba(200, 149, 99, 0.9) 100%);
  }

  .newsletter-premium__container {
    position: relative;
    z-index: 1;
    padding: var(--spacing-4xl, 96px) 0;
  }

  .newsletter-premium__content {
    max-width: 700px;
    margin: 0 auto;
    text-align: center;
  }

  .newsletter-premium__incentive {
    display: inline-flex;
    align-items: center;
    gap: var(--spacing-sm, 8px);
    padding: var(--spacing-sm, 8px) var(--spacing-lg, 24px);
    background: rgba(255, 255, 255, 0.2);
    backdrop-filter: blur(10px);
    color: white;
    font-size: 1.3rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    border-radius: var(--radius-full, 9999px);
    margin-bottom: var(--spacing-lg, 24px);
    border: 1px solid rgba(255, 255, 255, 0.3);
    animation: pulse 2s ease-in-out infinite;
  }

  @keyframes pulse {
    0,
    100% {
      transform: scale(1);
    }
    50% {
      transform: scale(1.05);
    }
  }

  .newsletter-premium__heading {
    font-size: clamp(3.2rem, 5vw, 5.6rem);
    font-weight: 700;
    color: white;
    margin-bottom: var(--spacing-md, 16px);
    line-height: 1.2;
    text-shadow: 0 2px 20px rgba(0, 0, 0, 0.2);
  }

  .newsletter-premium__subheading {
    font-size: clamp(1.6rem, 2vw, 2rem);
    color: rgba(255, 255, 255, 0.95);
    margin-bottom: var(--spacing-2xl, 48px);
    line-height: 1.6;
    text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
  }

  .newsletter-premium__form-wrapper {
    margin-bottom: var(--spacing-xl, 32px);
  }

  .newsletter-premium__input-group {
    display: flex;
    gap: var(--spacing-sm, 8px);
    max-width: 600px;
    margin: 0 auto var(--spacing-md, 16px);
  }

  .newsletter-premium__input {
    flex: 1;
    padding: var(--spacing-lg, 24px) var(--spacing-xl, 32px);
    border: 2px solid rgba(255, 255, 255, 0.3);
    border-radius: var(--radius-md, 8px);
    background: rgba(255, 255, 255, 0.95);
    font-size: 1.6rem;
    transition: all var(--transition-base, 0.25s);
  }

  .newsletter-premium__input::placeholder {
    color: #999;
  }

  .newsletter-premium__input:focus {
    border-color: white;
    background: white;
    box-shadow: 0 0 0 4px rgba(255, 255, 255, 0.2);
  }

  .newsletter-premium__button {
    padding: var(--spacing-lg, 24px) var(--spacing-2xl, 48px);
    background: white;
    color: var(--color-primary, #d4a574);
    border: none;
    border-radius: var(--radius-md, 8px);
    font-weight: 700;
    font-size: 1.6rem;
    cursor: pointer;
    transition: all var(--transition-base, 0.25s);
    display: flex;
    align-items: center;
    gap: var(--spacing-sm, 8px);
    white-space: nowrap;
  }

  .newsletter-premium__button:hover {
    transform: translateY(-2px);
    box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
  }

  .newsletter-premium__success,
  .newsletter-premium__error {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: var(--spacing-sm, 8px);
    padding: var(--spacing-md, 16px);
    border-radius: var(--radius-md, 8px);
    font-size: 1.4rem;
    margin-top: var(--spacing-md, 16px);
  }

  .newsletter-premium__success {
    background: rgba(76, 175, 80, 0.2);
    color: white;
    border: 1px solid rgba(255, 255, 255, 0.3);
  }

  .newsletter-premium__error {
    background: rgba(211, 47, 47, 0.2);
    color: white;
    border: 1px solid rgba(255, 255, 255, 0.3);
  }

  .newsletter-premium__privacy {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
    font-size: 1.3rem;
    color: rgba(255, 255, 255, 0.8);
    margin: 0;
  }

  .newsletter-premium__benefits {
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
    gap: var(--spacing-xl, 32px);
    padding-top: var(--spacing-xl, 32px);
    border-top: 1px solid rgba(255, 255, 255, 0.2);
  }

  .newsletter-premium__benefit {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm, 8px);
    color: white;
    font-size: 1.4rem;
    font-weight: 500;
  }

  .newsletter-premium__benefit-icon {
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: rgba(255, 255, 255, 0.2);
    border-radius: 50%;
  }

  @media screen and (max-width: 749px) {
    .newsletter-premium__container {
      padding: var(--spacing-3xl, 64px) 0;
    }

    .newsletter-premium__input-group {
      flex-direction: column;
    }

    .newsletter-premium__button {
      justify-content: center;
    }

    .newsletter-premium__benefits {
      flex-direction: column;
      align-items: center;
    }
  }
</style>

{% schema %}
  {
    "name": "Newsletter Premium",
    "tag": "section",
    "class": "section-newsletter-premium",
    "settings": [
      {
        "type": "text",
        "id": "heading",
        "label": "Heading",
        "default": "Join Our Beauty Community"
      },
      {
        "type": "textarea",
        "id": "subheading",
        "label": "Subheading",
        "default": "Get exclusive tips, early access to new products, and special offers"
      },
      {
        "type": "text",
        "id": "incentive",
        "label": "Incentive badge",
        "default": "Get 10% Off Your First Order",
        "info": "Appears above heading"
      },
      {
        "type": "text",
        "id": "button_text",
        "label": "Button text",
        "default": "Subscribe"
      }, {
        "type": "image_picker",
        "id": "background_image",
        "label": "Background image",
        "info": "Optional. Recommended: 1920 x 600px"
      }, {
        "type": "range",
        "id": "overlay_opacity",
        "min": 0,
        "max": 100,
        "step": 10,
        "unit": "%",
        "label": "Overlay opacity",
        "default": 90,
        "info": "Darkens background image for text readability"
      }
    ],
    "blocks": [
      {
        "type": "benefit",
        "name": "Benefit",
        "settings": [
          {
            "type": "select",
            "id": "icon",
            "label": "Icon",
            "options": [
              {
                "value": "none",
                "label": "None"
              },
              {
                "value": "gift",
                "label": "Gift"
              },
              {
                "value": "star",
                "label": "Star"
              },
              {
                "value": "bell",
                "label": "Bell"
              }, {
                "value": "tag",
                "label": "Tag"
              }
            ],
            "default": "gift"
          }, {
            "type": "text",
            "id": "text",
            "label": "Text",
            "default": "Exclusive offers"
          }
        ]
      }
    ],
    "presets": [
      {
        "name": "Newsletter Premium",
        "blocks": [
          {
            "type": "benefit",
            "settings": {
              "icon": "gift",
              "text": "Exclusive offers"
            }
          }, {
            "type": "benefit",
            "settings": {
              "icon": "star",
              "text": "Beauty tips"
            }
          }, {
            "type": "benefit",
            "settings": {
              "icon": "bell",
              "text": "Early access"
            }
          }
        ]
      }
    ]
  }
{% endschema %}